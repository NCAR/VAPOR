

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Getting Data into Vapor3 &mdash; Vapor 3.1.0 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
        <script type="text/javascript" src="_static/language_data.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Using Vapor 3" href="usage.html" />
    <link rel="prev" title="Quick Start Guide" href="quickStartGuide.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> Vapor
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="downloads.html">Downloads</a></li>
<li class="toctree-l1"><a class="reference internal" href="quickStartGuide.html">Quick Start Guide</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Getting Data into Vapor3</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#importing-data-vs-loading-vdc">Importing data vs Loading VDC</a></li>
<li class="toctree-l2"><a class="reference internal" href="#vapor-data-collection-vdc">Vapor Data Collection (VDC)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#wrf-arw-data-to-vdc">WRF-ARW data to VDC</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#step-1-create-vdc-metadata-file">Step 1: Create .vdc metadata file</a></li>
<li class="toctree-l4"><a class="reference internal" href="#step-2-the-wavelet-transform">Step 2: The wavelet transform</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#netcdf-cf-data-to-vdc">NetCDF-CF data to VDC</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#coordinate-variables">Coordinate Variables</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id1">Step 1: Create .vdc metadata file</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id2">Step 2: The wavelet transform</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#raw-binary-data-to-vdc">Raw binary data to VDC</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id3">Step 1: Create .vdc metadata file</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id4">Step 2: The wavelet transform</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="usage.html">Using Vapor 3</a></li>
<li class="toctree-l1"><a class="reference internal" href="contactAndContribute.html">Contact and Contribute</a></li>
<li class="toctree-l1"><a class="reference internal" href="licenseAndCitation.html">License and Citation</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Vapor</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>Getting Data into Vapor3</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/gettingDataIntoVapor.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="getting-data-into-vapor3">
<span id="gettingdataintovapor"></span><h1>Getting Data into Vapor3<a class="headerlink" href="#getting-data-into-vapor3" title="Permalink to this headline">¶</a></h1>
<div class="section" id="importing-data-vs-loading-vdc">
<h2>Importing data vs Loading VDC<a class="headerlink" href="#importing-data-vs-loading-vdc" title="Permalink to this headline">¶</a></h2>
<p>Vapor can directly read the data formats listed below.  We call this importing data.</p>
<ul class="simple">
<li>NetCDF files that follow the CF Convention (NetCDF-CF)</li>
<li>WRF-ARW</li>
<li>MPAS</li>
</ul>
<p>NetCDF-CF, WRF, and raw binary files can also be converted into a Vapor Data Collection (VDC).  This method which has advantages <a class="reference internal" href="#vdc"><span class="std std-ref">described below</span></a>.  MPAS is currently not supported for VDC conversion.</p>
<p>Users can either load VDC, or import their data through Vapor’s <code class="docutils literal notranslate"><span class="pre">File</span></code> menu.</p>
<table border="1" class="docutils">
<colgroup>
<col width="48%" />
<col width="4%" />
<col width="48%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>Loading a .vdc file</td>
<td>&#160;</td>
<td>Importing data</td>
</tr>
<tr class="row-even"><td><img alt="_images/loadData.png" class="first last" src="_images/loadData.png" />
</td>
<td>or</td>
<td><img alt="_images/importWRF.png" class="first last" src="_images/importWRF.png" />
</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="vapor-data-collection-vdc">
<span id="vdc"></span><h2>Vapor Data Collection (VDC)<a class="headerlink" href="#vapor-data-collection-vdc" title="Permalink to this headline">¶</a></h2>
<p>One of Vapor’s strengths is the VDC data format, which allows users to render their data at different levels of compression.  Viewing compressed data reduces the time a rendering takes to complete, improving interactivity.</p>
<p>With VDC, users can configure their renderers quickly at low fidelity, and then turn off compression for their final renderings.  Being able to interact with your data becomes important when rendering takes many seconds, minutes, or even hours to complete.</p>
<p>Creating a VDC is a two step process using command line tools.</p>
<p>Step 1) Create a .vdc metadata file that describes the structure of your data
Step 2) Apply the wavelet transform to populate your VDC</p>
<p>This process is supported with <a class="reference internal" href="#wrf"><span class="std std-ref">WRF-ARW</span></a>, <a class="reference internal" href="#netcdf-cf"><span class="std std-ref">NetCDF-CF</span></a>, and <cite>raw binary data &lt;binary&gt;</cite>.  Read on to find instructions for your data type.</p>
<div class="section" id="wrf-arw-data-to-vdc">
<span id="wrf"></span><h3>WRF-ARW data to VDC<a class="headerlink" href="#wrf-arw-data-to-vdc" title="Permalink to this headline">¶</a></h3>
<p>The two tools for converting WRF-ARW into VDC are <code class="docutils literal notranslate"><span class="pre">wrfvdccreate</span></code> and <code class="docutils literal notranslate"><span class="pre">wrf2vdc</span></code>.  If these commands are issued by themselves, advanced options will be listed to the terminal.  These advanced options are usually not necessary.</p>
<div class="section" id="step-1-create-vdc-metadata-file">
<h4>Step 1: Create .vdc metadata file<a class="headerlink" href="#step-1-create-vdc-metadata-file" title="Permalink to this headline">¶</a></h4>
<p>In the directory where Vapor 3 is installed, there is a command line utility called <code class="docutils literal notranslate"><span class="pre">wrfvdccreate</span></code>.  Issue this command in a terminal (Unix) or command prompt (Windows), followed by your WRF-ARW files, and finally the name of the .vdc file to be written.</p>
<div class="align-center figure" id="id5">
<img alt="_images/wrfvdccreate.png" src="_images/wrfvdccreate.png" />
<p class="caption"><span class="caption-text">Creating a .vdc metadata file with <code class="docutils literal notranslate"><span class="pre">wrfvdccreate</span></code>.</span></p>
</div>
</div>
<div class="section" id="step-2-the-wavelet-transform">
<h4>Step 2: The wavelet transform<a class="headerlink" href="#step-2-the-wavelet-transform" title="Permalink to this headline">¶</a></h4>
<p>Once we have a .vdc file, the metadata has been recorded and we can apply the wavelet transform.  From Vapor 3’s installation directory, issue the command <code class="docutils literal notranslate"><span class="pre">wrf2vdc</span></code>, followed by your WRF-ARW files, and finally followed by the .vdc file that was made in Step 1.</p>
<div class="align-center figure" id="id6">
<img alt="_images/wrf2vdc.png" src="_images/wrf2vdc.png" />
<p class="caption"><span class="caption-text">Applying the wavelet transform to WRF-ARW data with <code class="docutils literal notranslate"><span class="pre">wrf2vdc</span></code></span></p>
</div>
</div>
</div>
<div class="section" id="netcdf-cf-data-to-vdc">
<span id="netcdf-cf"></span><h3>NetCDF-CF data to VDC<a class="headerlink" href="#netcdf-cf-data-to-vdc" title="Permalink to this headline">¶</a></h3>
<p>If your NetCDF data follows the CF conventions, then the process of converting it to VDC is nearly identical to the WRF conversion process.  The commands that will be used are named <em>cfvdccreate</em> for .vdc metadata creation, and <em>cf2vdc</em> for applying the wavelet transform.</p>
<p>In order for NetCDF data to be compliant with the CF conventions, the following conditions must be met for the file’s vector, scalar, and coordinate variables.</p>
<div class="section" id="coordinate-variables">
<h4>Coordinate Variables<a class="headerlink" href="#coordinate-variables" title="Permalink to this headline">¶</a></h4>
<p>What is a “Coordinate Variable”?  From the CF1.X Definition:</p>
<p><em>We use this term precisely as it is defined in section 2.3.1 of the NUG.  It is a one- dimensional variable with the same name as its dimension [e.g., time(time)], and it is defined as a numeric data type with values that are ordered monotonically. Missing values are not allowed in coordinate variables.</em></p>
<div class="section" id="the-axis-attribute">
<h5>The <code class="docutils literal notranslate"><span class="pre">axis</span></code> attribute<a class="headerlink" href="#the-axis-attribute" title="Permalink to this headline">¶</a></h5>
<p>Each coordinate variable must have an <code class="docutils literal notranslate"><span class="pre">axis</span></code> attribute as follows:</p>
<blockquote>
<div><ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">X</span></code> coordinate variables must contain an <code class="docutils literal notranslate"><span class="pre">axis</span></code> attribute that is equal to <code class="docutils literal notranslate"><span class="pre">0</span></code>.</li>
<li><code class="docutils literal notranslate"><span class="pre">Y</span></code> coordinate variables must contain an <code class="docutils literal notranslate"><span class="pre">axis</span></code> attribute that is equal to <code class="docutils literal notranslate"><span class="pre">1</span></code>.</li>
<li><code class="docutils literal notranslate"><span class="pre">Z</span></code> coordinate variables must contain an <code class="docutils literal notranslate"><span class="pre">axis</span></code> attribute that is equal to <code class="docutils literal notranslate"><span class="pre">2</span></code>.</li>
<li><code class="docutils literal notranslate"><span class="pre">Time</span></code> coordinate variables must contain an <code class="docutils literal notranslate"><span class="pre">axis</span></code> attribute that is equal to <code class="docutils literal notranslate"><span class="pre">3</span></code>.</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="the-units-attribute">
<h5>The <code class="docutils literal notranslate"><span class="pre">units</span></code> attribute<a class="headerlink" href="#the-units-attribute" title="Permalink to this headline">¶</a></h5>
<p>Coordinate variables for the X, Y and Z axes may have an attribute that defines the units they are measured in.  Some suitable values for the <code class="docutils literal notranslate"><span class="pre">units</span></code> attribute are:</p>
<blockquote>
<div><ul class="simple">
<li>degree_east</li>
<li>meters</li>
<li>m</li>
<li>km</li>
</ul>
</div></blockquote>
<p>Optionally, the Time coordinate variable may have a <code class="docutils literal notranslate"><span class="pre">units</span></code> attribute which must be identifiable by the Udunits library.  Suitable <code class="docutils literal notranslate"><span class="pre">units</span></code> attributes include:</p>
<blockquote>
<div><ul class="simple">
<li>seconds</li>
<li>s</li>
<li>days since 0001-01-01 00:00:00</li>
<li>seconds since 2011-01-01 00:00:00</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="vertical-coordinates">
<h5>Vertical Coordinates<a class="headerlink" href="#vertical-coordinates" title="Permalink to this headline">¶</a></h5>
<p><em>Need to elaborate.  We currently support ocean_s_coordinate_g1 and ocean_s_coordinate_g2 when the vertical coordinate is dimensionless.  What about other cases?</em></p>
</div>
<div class="section" id="missing-values">
<h5>Missing Values<a class="headerlink" href="#missing-values" title="Permalink to this headline">¶</a></h5>
<p>Variables with missing data values must have the attribute <em>_FillValue</em> or <em>missing_value</em> specified.  See section 2.5.1 of the CF 1.6 specification for more information.</p>
</div>
</div>
<div class="section" id="id1">
<h4>Step 1: Create .vdc metadata file<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h4>
<p>Once your NetCDF files have attributes that make them CF compliant, you may produce VDC by doing the follwing.</p>
<p>In the directory where Vapor 3 is installed, there is a command line utility called <em>cfvdccreate</em>.  Issue this command in a terminal (Unix) or command prompt (Windows), followed by your NetCDF-CF files, and finally the name of the .vdc file to be written.</p>
<p>Typing the command <em>cfvdccreate</em> alone will display the optional arguments that may be used, but these are usually not necessary.</p>
</div>
<div class="section" id="id2">
<h4>Step 2: The wavelet transform<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h4>
</div>
</div>
<div class="section" id="raw-binary-data-to-vdc">
<span id="binary"></span><h3>Raw binary data to VDC<a class="headerlink" href="#raw-binary-data-to-vdc" title="Permalink to this headline">¶</a></h3>
<p>Converting raw binary data to VDC is the most complex process for converting data in Vapor 3.  With WRF-ARW and NetCDF-CF data, Vapor can read the files an extract metadata that describes the grid that the data exists within.  With raw binary data, we need to define that metadata ourselves in step 1.</p>
<div class="section" id="id3">
<h4>Step 1: Create .vdc metadata file<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h4>
<p>To make a VDC from scratch, users need to carefully read all options in the <code class="docutils literal notranslate"><span class="pre">vdccreate</span></code> utility, and define their .vdc metadata file accordingly.</p>
<div class="align-center figure" id="id7">
<img alt="_images/vdccreate.png" src="_images/vdccreate.png" />
<p class="caption"><span class="caption-text">Command line arguments for vdccreate, seen by issuing the command without any arguments</span></p>
</div>
</div>
<div class="section" id="id4">
<h4>Step 2: The wavelet transform<a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h4>
<p>Now that a .vdc metadata file has been created, the wavelet decomposition can take place.  Each variable must be converted individually with <code class="docutils literal notranslate"><span class="pre">raw2vdc</span></code>, and this must be done one timestep at a time.</p>
<div class="align-center figure" id="id8">
<img alt="_images/raw2vdc.png" src="_images/raw2vdc.png" />
<p class="caption"><span class="caption-text">Command line arguments for raw2vdc wavelet transform, seen by issuing the command without any arguments</span></p>
</div>
</div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="usage.html" class="btn btn-neutral float-right" title="Using Vapor 3" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="quickStartGuide.html" class="btn btn-neutral float-left" title="Quick Start Guide" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, John Clyne, Scott Pearse, Samuel Li, Stanislaw Jaroszynski

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>