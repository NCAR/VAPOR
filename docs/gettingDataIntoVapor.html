

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Getting Data into Vapor3 &mdash; Vapor 3.2.0.59c3322 documentation</title>
  

  
  
    <link rel="shortcut icon" href="_static/vaporVLogo.png"/>
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/language_data.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Reference Documentation" href="referenceDocumentation.html" />
    <link rel="prev" title="Quick Start Guide" href="quickStartGuide.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> Vapor
          

          
            
            <img src="_static/vaporLogoWhite2.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="downloads.html">Downloads</a></li>
<li class="toctree-l1"><a class="reference internal" href="quickStartGuide.html">Quick Start Guide</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Getting Data into Vapor3</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#importing-data">Importing data</a></li>
<li class="toctree-l2"><a class="reference internal" href="#vapor-data-collection-vdc">Vapor Data Collection (VDC)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="referenceDocumentation.html">Reference Documentation</a></li>
<li class="toctree-l3"><a class="reference internal" href="#using-the-command-line-tools">Using the Command Line Tools</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#wrf-arw">WRF-ARW</a></li>
<li class="toctree-l2"><a class="reference internal" href="#netcdf-and-the-cf-conventions">NetCDF and the CF Conventions</a></li>
<li class="toctree-l2"><a class="reference internal" href="#raw-binary-data">Raw Binary Data</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="usage.html">Using Vapor 3</a></li>
<li class="toctree-l1"><a class="reference external" href="https://vapor.discourse.group">Get Help on Our Forum</a></li>
<li class="toctree-l1"><a class="reference internal" href="contributing.html">Contributing to Vapor</a></li>
<li class="toctree-l1"><a class="reference internal" href="licenseAndCitation.html">License and Citation</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Vapor</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>Getting Data into Vapor3</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/gettingDataIntoVapor.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="getting-data-into-vapor3">
<span id="gettingdataintovapor"></span><h1>Getting Data into Vapor3<a class="headerlink" href="#getting-data-into-vapor3" title="Permalink to this headline">¶</a></h1>
<p>Vapor can directly import the datasets listed below.  Some of them can be converted into the <a class="reference internal" href="#vdc"><span class="std std-ref">VDC</span></a> format if you are experiencing a performance bottleneck.  We strongly recommend that users start by importing their data and only convert VDC if necessary.</p>
<blockquote>
<div><ul class="simple">
<li><p>NetCDF files that follow the CF Convention (<a class="reference internal" href="#netcdf-cf"><span class="std std-ref">NetCDF-CF</span></a>)</p></li>
<li><p>WRF-ARW <a class="reference internal" href="#wrf"><span class="std std-ref">WRF-ARW</span></a></p></li>
<li><p>MPAS <span class="xref std std-ref">mpas</span></p></li>
</ul>
</div></blockquote>
<p><a class="reference internal" href="#binary"><span class="std std-ref">Raw binary</span></a> data must be converted to VDC before loading into Vapor.</p>
<div class="section" id="importing-data">
<span id="importdata"></span><h2>Importing data<a class="headerlink" href="#importing-data" title="Permalink to this headline">¶</a></h2>
<p>Users can import their data through Vapor’s <code class="docutils literal notranslate"><span class="pre">File</span></code> menu.</p>
<div class="align-center figure" id="id1">
<a class="reference internal image-reference" href="_images/importWRF.png"><img alt="_images/importWRF.png" src="_images/importWRF.png" style="width: 400px;" /></a>
<p class="caption"><span class="caption-text">Importing WRF data into Vapor.</span><a class="headerlink" href="#id1" title="Permalink to this image">¶</a></p>
</div>
</div>
<div class="section" id="vapor-data-collection-vdc">
<span id="vdc"></span><h2>Vapor Data Collection (VDC)<a class="headerlink" href="#vapor-data-collection-vdc" title="Permalink to this headline">¶</a></h2>
<p>In most cases, directly importing data is sufficient for an interactive user experience.  However, if rendering times keep the application from being interactive, users may want to consider using the VDC data foramt.</p>
<p>The VDC data format allows users to render their data at different levels of compression.  Viewing compressed data reduces the time a rendering takes to complete, improving interactivity.</p>
<p>With VDC, users can configure their renderers quickly at low fidelity, and then turn off compression for their final renderings.  Being able to interact with your data becomes important when rendering takes many seconds, minutes, or even hours to complete.</p>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="referenceDocumentation.html">Reference Documentation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="referenceDocumentation.html#cf2vdc">cf2vdc</a></li>
<li class="toctree-l2"><a class="reference internal" href="referenceDocumentation.html#cfvdccreate">cfvdccreate</a></li>
<li class="toctree-l2"><a class="reference internal" href="referenceDocumentation.html#ncdf2wasp">ncdf2wasp</a></li>
<li class="toctree-l2"><a class="reference internal" href="referenceDocumentation.html#raw2vdc">raw2vdc</a></li>
<li class="toctree-l2"><a class="reference internal" href="referenceDocumentation.html#raw2wasp">raw2wasp</a></li>
<li class="toctree-l2"><a class="reference internal" href="referenceDocumentation.html#tiff2geotiff">tiff2geotiff</a></li>
<li class="toctree-l2"><a class="reference internal" href="referenceDocumentation.html#vdc2raw">vdc2raw</a></li>
<li class="toctree-l2"><a class="reference internal" href="referenceDocumentation.html#vdccreate">vdccreate</a></li>
<li class="toctree-l2"><a class="reference internal" href="referenceDocumentation.html#vdcdump">vdcdump</a></li>
<li class="toctree-l2"><a class="reference internal" href="referenceDocumentation.html#wasp2ncdf">wasp2ncdf</a></li>
<li class="toctree-l2"><a class="reference internal" href="referenceDocumentation.html#wasp2raw">wasp2raw</a></li>
<li class="toctree-l2"><a class="reference internal" href="referenceDocumentation.html#waspcreate">waspcreate</a></li>
<li class="toctree-l2"><a class="reference internal" href="referenceDocumentation.html#wrf2vdc">wrf2vdc</a></li>
<li class="toctree-l2"><a class="reference internal" href="referenceDocumentation.html#wrfvdccreate">wrfvdccreate</a></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="using-the-command-line-tools">
<h3>Using the Command Line Tools<a class="headerlink" href="#using-the-command-line-tools" title="Permalink to this headline">¶</a></h3>
<p>Creating a VDC requires command line tools that come bundled with Vapor.  These tools can be found and issued in the installation directory.  For example, Windows users may find it in C:Program FilesVAPORand Linux users may find it in /home/john_doe/vapor/bin/wrf2vdc.</p>
<p>Alternatively, the tools can be added to the user’s system path by clicking on the <cite>Tools</cite> menu, and selecting <cite>Install Command Line Tools</cite>.After doing this, users will be able to issue the command line utilities from any directory in their terminal or command prompt.</p>
<div class="align-center figure" id="id2">
<span id="commandlinetools"></span><img alt="_images/installCLTools.png" src="_images/installCLTools.png" />
<p class="caption"><span class="caption-text">Installing the command line tools for VDC creation, through Vapor’s GUI.</span><a class="headerlink" href="#id2" title="Permalink to this image">¶</a></p>
</div>
<p>The two step VDC creation process is as follows:</p>
<blockquote>
<div><p>Step 1) Create a .vdc metadata file that describes the structure of your data</p>
<p>Step 2) Transform the data values into VDC format</p>
</div></blockquote>
<p>This process is supported with <a class="reference internal" href="#wrf"><span class="std std-ref">WRF-ARW</span></a>, <a class="reference internal" href="#netcdf-cf"><span class="std std-ref">NetCDF-CF</span></a>, and <cite>raw binary data &lt;binary&gt;</cite>.</p>
<p>Once the conversion is complete, users can load VDC files into Vapor.  Read on for instructions for your data type.</p>
<div class="align-center figure" id="id3">
<a class="reference internal image-reference" href="_images/loadData.png"><img alt="_images/loadData.png" src="_images/loadData.png" style="width: 400px;" /></a>
<p class="caption"><span class="caption-text">Loading a VDC into Vapor.</span><a class="headerlink" href="#id3" title="Permalink to this image">¶</a></p>
</div>
</div>
</div>
<div class="section" id="wrf-arw">
<span id="wrf"></span><h2>WRF-ARW<a class="headerlink" href="#wrf-arw" title="Permalink to this headline">¶</a></h2>
<p>Vapor supports WRF-ARW model output, so it can be <a class="reference internal" href="#importdata"><span class="std std-ref">directly imported</span></a>.</p>
<p>The two tools for converting WRF-ARW into VDC are <code class="docutils literal notranslate"><span class="pre">wrfvdccreate</span></code> and <code class="docutils literal notranslate"><span class="pre">wrf2vdc</span></code>.  If either of these commands are issued by themselves, advanced options will be listed to the terminal.  These advanced options are usually not necessary.</p>
<p>In the directory where Vapor 3 is installed, there is a command line utility called <code class="docutils literal notranslate"><span class="pre">wrfvdccreate</span></code>.  Issue this command in a terminal (Unix) or command prompt (Windows), followed by your WRF-ARW files, and finally the name of the .vdc file to be written.</p>
<blockquote>
<div><p><code class="docutils literal notranslate"><span class="pre">wrfvdccreate</span> <span class="pre">wrfout_d02_2005-08-29_02</span> <span class="pre">katrina.vdc</span></code></p>
</div></blockquote>
<div class="align-center figure" id="id4">
<img alt="_images/wrfvdccreate.png" src="_images/wrfvdccreate.png" />
<p class="caption"><span class="caption-text">Creating a .vdc metadata file with <code class="docutils literal notranslate"><span class="pre">wrfvdccreate</span></code>.</span><a class="headerlink" href="#id4" title="Permalink to this image">¶</a></p>
</div>
<p>Once we have a .vdc file, the metadata has been recorded and we can transform the data into the VDC format.  From Vapor 3’s installation directory, issue the command <code class="docutils literal notranslate"><span class="pre">wrf2vdc</span></code>, followed by your WRF-ARW files, and finally followed by the .vdc file that was made in Step 1.</p>
<blockquote>
<div><p><code class="docutils literal notranslate"><span class="pre">wrf2vdce</span> <span class="pre">wrfout_d02_2005-08-29_02</span> <span class="pre">katrina.vdc</span></code></p>
</div></blockquote>
<div class="align-center figure" id="id5">
<img alt="_images/wrf2vdc.png" src="_images/wrf2vdc.png" />
<p class="caption"><span class="caption-text">Applying the VDC transform to WRF-ARW data with <code class="docutils literal notranslate"><span class="pre">wrf2vdc</span></code></span><a class="headerlink" href="#id5" title="Permalink to this image">¶</a></p>
</div>
</div>
<div class="section" id="netcdf-and-the-cf-conventions">
<span id="netcdf-cf"></span><h2>NetCDF and the CF Conventions<a class="headerlink" href="#netcdf-and-the-cf-conventions" title="Permalink to this headline">¶</a></h2>
<p>If your NetCDF data follows the CF conventions, then the process of converting it to VDC is nearly identical to the WRF conversion process.  The commands that will be used are named <em>cfvdccreate</em> for .vdc metadata creation, and <em>cf2vdc</em> for applying the transform.</p>
<p>The <a class="reference external" href="http://cfconventions.org/compliance-checker.html">CF Conformance Checker</a> may be used to test if your data adheres to the standard.  Passing this checker does not guarantee that Vapor will read the data, but a failer is a strong indicator that Vapor will not be able to read the data.</p>
<p>In order for NetCDF data to be compliant with the CF conventions, the following conditions must be met for the file’s vector, scalar, and coordinate variables.</p>
<p>What is a “Coordinate Variable”?  From the CF1.X Definition:</p>
<p><em>We use this term precisely as it is defined in section 2.3.1 of the NUG.  It is a one- dimensional variable with the same name as its dimension [e.g., time(time)], and it is defined as a numeric data type with values that are ordered monotonically. Missing values are not allowed in coordinate variables.</em></p>
<p>Each coordinate variable must have an <code class="docutils literal notranslate"><span class="pre">axis</span></code> attribute as follows:</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">X</span></code> coordinate variables must contain an <code class="docutils literal notranslate"><span class="pre">axis</span></code> attribute that is equal to <code class="docutils literal notranslate"><span class="pre">0</span></code> or <code class="docutils literal notranslate"><span class="pre">X</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Y</span></code> coordinate variables must contain an <code class="docutils literal notranslate"><span class="pre">axis</span></code> attribute that is equal to <code class="docutils literal notranslate"><span class="pre">1</span></code> or <code class="docutils literal notranslate"><span class="pre">Y</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Z</span></code> coordinate variables must contain an <code class="docutils literal notranslate"><span class="pre">axis</span></code> attribute that is equal to <code class="docutils literal notranslate"><span class="pre">2</span></code> or <code class="docutils literal notranslate"><span class="pre">Z</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Time</span></code> coordinate variables must contain an <code class="docutils literal notranslate"><span class="pre">axis</span></code> attribute that is equal to <code class="docutils literal notranslate"><span class="pre">3</span></code> or <code class="docutils literal notranslate"><span class="pre">T</span></code>.</p></li>
</ul>
</div></blockquote>
<p>The Time coordinate variable <strong>must</strong> have a <code class="docutils literal notranslate"><span class="pre">units</span></code> attribute which must be identifiable by the Udunits library.  Suitable <code class="docutils literal notranslate"><span class="pre">units</span></code> attributes include:</p>
<blockquote>
<div><ul class="simple">
<li><p>seconds</p></li>
<li><p>s</p></li>
<li><p>days since 0001-01-01 00:00:00</p></li>
<li><p>seconds since 2011-01-01 00:00:00</p></li>
</ul>
</div></blockquote>
<p>Coordinate variables for the X, Y and Z axes may have an attribute that defines the units they are measured in.  These units will assiste vapor in creating renderings that are accurate between multiple datasets.  Some suitable values for the <code class="docutils literal notranslate"><span class="pre">units</span></code> attribute are:</p>
<blockquote>
<div><ul class="simple">
<li><p>degree_east</p></li>
<li><p>meters</p></li>
<li><p>m</p></li>
<li><p>km</p></li>
</ul>
</div></blockquote>
<p><em>Need to elaborate.  We currently support ocean_s_coordinate_g1 and ocean_s_coordinate_g2 when the vertical coordinate is dimensionless.  What about other cases?</em></p>
<p>Variables with missing data values must have the attribute <em>_FillValue</em> or <em>missing_value</em> specified.  See section 2.5.1 of the CF 1.6 specification for more information.</p>
<p>Once your NetCDF files have attributes that make them CF compliant, you may produce VDC by doing the following.</p>
<p>In the directory where Vapor 3 is installed, there is a command line utility called <em>cfvdccreate</em>.  Issue this command in a terminal (Unix) or command prompt (Windows), followed by your NetCDF-CF files, and finally the name of the .vdc file to be written.</p>
<p>Typing the command <em>cfvdccreate</em> alone will display the optional arguments that may be used, but these are usually not necessary.</p>
</div>
<div class="section" id="raw-binary-data">
<span id="binary"></span><h2>Raw Binary Data<a class="headerlink" href="#raw-binary-data" title="Permalink to this headline">¶</a></h2>
<p>Converting raw binary data to VDC is a complex process for converting data in Vapor 3.  With WRF-ARW and NetCDF-CF data, Vapor can read the files an extract metadata that describes the grid that the data exists within.  With raw binary data, we need to define that metadata ourselves in step 1.</p>
<p>To make a VDC from scratch, users need to carefully read all options in the <code class="docutils literal notranslate"><span class="pre">vdccreate</span></code> utility, and define their .vdc metadata file accordingly.</p>
<p>In this <a class="reference external" href="https://drive.google.com/open?id=1wJtPX0DPgovZSulAC8kntDKVcDkTw1Y7">sample dataset of a sphere</a>, we have a 64x64x64 rectilinear grid with one timestep, and one 3D variable.  For this example, we can create a .vdc metadata file with the following flags from vdccreate.  Note that we are not using the raw data file yet, just defining the grid, time dimension, and variables.</p>
<blockquote>
<div><p><code class="docutils literal notranslate"><span class="pre">vdccreate</span> <span class="pre">-dimension</span> <span class="pre">64x64x64</span> <span class="pre">-numts</span> <span class="pre">1</span> <span class="pre">-vars3d</span> <span class="pre">exampleVar</span> <span class="pre">sphere64.vdc</span></code></p>
</div></blockquote>
<div class="align-center figure" id="id6">
<img alt="_images/vdccreate.png" src="_images/vdccreate.png" />
<p class="caption"><span class="caption-text">Command line arguments for vdccreate, seen by issuing the command without any arguments</span><a class="headerlink" href="#id6" title="Permalink to this image">¶</a></p>
</div>
<p>Now that a .vdc metadata file has been created, the VDC transform can take place.  Each variable must be converted individually with <code class="docutils literal notranslate"><span class="pre">raw2vdc</span></code>, and this must be done one timestep at a time.</p>
<blockquote>
<div><p><code class="docutils literal notranslate"><span class="pre">raw2vdc</span> <span class="pre">-ts</span> <span class="pre">0</span> <span class="pre">-varname</span> <span class="pre">exampleVar</span> <span class="pre">sphere64.vdc</span> <span class="pre">sphere64.raw</span></code></p>
</div></blockquote>
<div class="align-center figure" id="id7">
<img alt="_images/sphere.png" src="_images/sphere.png" />
<p class="caption"><span class="caption-text">A volume rendering of our sphere, converted from raw binary data.</span><a class="headerlink" href="#id7" title="Permalink to this image">¶</a></p>
</div>
<div class="align-center figure" id="id8">
<img alt="_images/raw2vdc.png" src="_images/raw2vdc.png" />
<p class="caption"><span class="caption-text">Command line arguments for raw2vdc wavelet transform, seen by issuing the command without any arguments.</span><a class="headerlink" href="#id8" title="Permalink to this image">¶</a></p>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="referenceDocumentation.html" class="btn btn-neutral float-right" title="Reference Documentation" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="quickStartGuide.html" class="btn btn-neutral float-left" title="Quick Start Guide" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019 University Corporation for Atmospheric Research

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>