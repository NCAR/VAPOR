<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
  <meta content="text/html; charset=ISO-8859-1"
 http-equiv="content-type">
  <title>Field Line Advection Setup</title>
</head>
<body>
<div style="text-align: center;">
<h3 style="text-align: center;"><font size="+2">How to Set Up Unsteady
Flow<br>
</font></h3>
</div>
<ol>
  <li><font size="+2"> Load a Metadata file (*.vdf file) into VAPOR. </font></li>
  <li><font size="+2">In the Basic Flow Settings: </font>
    <ol>
      <li><font size="+2">Specify "Unsteady" as the
flow type </font></li>
      <li><font size="+2"> Specify three variables for the unsteady
(e.g. velocity)
field</font></li>
      <font size="+2"> </font><li><font size="+2">Specify the
"Unsteady Integration Direction" as either "Forward" or
"Backward".&nbsp; Seeds will be advected in the specified
direction by integrating the unsteady field either forwards or
backwards in time.<br>
        </font></li>
      <li><font size="+2">Specify the "Unsteady field scale
factor".&nbsp; (Normally with WRF datasets this factor is 1.)  This
depends on the space and time scales that were used when the data was
generated.&nbsp; It is the product:
(spatial-correction-factor)*(time-correction-factor), where:</font></li>
      <ul>
        <li><font size="+2">(time-correction-factor) is the number of
simulation time units (e.g. seconds) per vapor (.vdf) time step.  If
the user times are correctly specified in the metadata (vdf file) then this 
factor should be 1.
</font></li>
        <li><font size="+2">(spatial-correction-factor) is the ratio
of the full
domain size in VAPOR (see the VAPOR region panel) to the actual user
domain extents that were used in the simulation.  If the data extents in
the metadata (vdf file)
are correctly specified to the actual user coordinates, then this factor should be 1.</font></li>
      </ul>
    </ol>
    <font size="+2"> </font></li>
  <li><font size="+2">Set up flow seeding as follows:</font></li>
  <ol>
    <li><font size="+2">Decide whether to use a random rake, nonrandom
rake, or a
list of seeds, as the starting seeds for the field lines to be advected.</font></li>
    <ul>
      <li><font size="+2">If you are using a rake,&nbsp; the position
and size of
the rake can be established by using sliders, by typing in numerical
values, or by using the rake tool in the visualizer window.</font></li>
      <li><font size="+2">To use a list of seeds, either type it in
(using the
"edit seed list" button), read the seeds from a text file,
or insert them using the probe tool.&nbsp; Each
seed in the list has (x,y,z)-coordinates, as well as a time.&nbsp; If
the time is negative, that seed point is valid for all seed time steps.</font></li>
    </ul>
    <li><font size="+2">Under the "Unsteady Flow Time Settings", specify the time
steps when the seed points are to be
injected into the flow, using the three values labeled
"Seed time start, end, increment".&nbsp; These determine an increasing
sequence of integers evenly spaced in time, of the form: a, a+b,
a+2b,...,a+kb, where a is the "Seed Time
Start", b is the "increment" and the largest injection time, a+kb, is
no greater than the "Seed Time End".&nbsp; If the seeds are from a seed
list, and the seed time is nonnegative, then that seed is only injected
at its specified time step.</font></li>
    <li><font size="+2">In the Unsteady Flow Time Settings:</font></li>
    <ol>
      <li><font size="+2">Set the "Unsteady
samples per time step" to be the number of separate positions along a
path line that will be displayed in the interval from one time step to
the next.<span style="">&nbsp; </span>Increase this to get a smoother
path line.</font></li>
      <li class="MsoNormal" style=""><font size="+2">&#8220;Display interval
min, max&#8221; determines the portion of each path that is displayed at a
given time.<span style="">&nbsp; </span>If T is the current time step
(as specified in the Animation Panel), then the portion of the flow
line from T+min to T+max will be displayed.<span style="">&nbsp; </span>For
example:</font></li>
      <ul>
        <li><font size="+2"><font size="+2">&nbsp;To see the entire
path
line at once, make min
very negative and max very positive (e.g. -1000 and +1000).
          </font></font></li>
        <li><font size="+2"><font size="+2">To see the path line evolve
(grow) over time, with the
unsteady integration = forward, set min to be very negative (e.g. min =
-1000)
and set max = 0. The animation panel can
later be used to animate the path line evolution.</font></font></li>
        <font size="+2"><font size="+2"> </font></font>
      </ul>
      <font size="+2"><font size="+2"> </font></font>
    </ol>
    <font size="+2"><font size="+2"> <li><font size="+2">If the
unsteady field data is not available at every
time step, you must specify the time steps that will be sampled, using
the "Unsteady Flow Time Settings".&nbsp; By default, every
time step is sampled from beginning to end, using values in "Time step
sample start, end, increment".&nbsp; Check the optional "Use time step
list" to specify an arbitrary set of time steps that will be sampled.</font></li>
    </font><br>
</font>
  </ol>
  <div style="text-align: center;">
  <h3><big></big></h3>
     </div>
  <font size="+2"><font size="+2"><font size="+2"><span
 style="font-weight: bold;">Nonuniform random seed
placement:</span><br>
&nbsp;&nbsp;&nbsp; If you are using the &#8220;Random Rake&#8221; for seed
placement, the distribution of random seeds can be biased by a field
magnitude using bias settings in the "Flow Seeding Settings".
&nbsp;&nbsp; As you increase the bias (above 0), the
seeds are chosen at larger field magnitude values, approaching the
maximum field magnitude within the rake bounds.&nbsp; Bias values below
zero result in seeds to be distributed with field magnitudes nearer
zero.&nbsp; The three variables labeled "Seed Distrib. Field" identify
the vector field whose magnitude is used to determine the seed
distribution.<br>
&nbsp;<br>
  <span style="font-weight: bold;">Color and opacity settings</span><br>
&nbsp;&nbsp;&nbsp; By default, path lines have a constant color and
opacity.&nbsp;&nbsp; Using the Color/Opacity mapping, you can make the
color and opacity depend on any of the following:<br>
  </font>
  </font></font>
  <ol>
    <font size="+2"><font size="+2"> </font></font>
    <ol>
      <font size="+2"><font size="+2"> </font></font>
    </ol>
  </ol>
  <ul>
    <font size="+2"><font size="+2"> <li><font size="+2">Time Step<span
 style="font-family: &quot;times new roman&quot;;"> </span></font><span
 style="font-size: 12pt; font-family: &quot;Times New Roman&quot;;"><font
 size="+2">(i.e. the specific time step associated
with a particle as it moves along the path line)</font> </span></li>
    <li><font size="+2">Field Magnitude (The magnitude of the unsteady
field at the
position along the path line)</font></li>
    <li><font size="+2">Seed Index.&nbsp; The seeds are numbered from 0
to N-1
where N is the number of different seed points.&nbsp; If this option is
selected, each field line has color or opacity determined by its seed
point.</font></li>
    <li><font size="+2">&nbsp;Variable.&nbsp; The color or opacity is a
mapping of
an arbitrary variable at the position of the point in the current VAPOR
data collection.</font></li>
    </font></font>
  </ul>
  <ol>
    <font size="+2"><font size="+2"> </font></font>
    <ol>
      <font size="+2"><font size="+2"> </font></font>
    </ol>
  </ol>
  <font size="+2"><font size="+2"><font size="+2">When one of these
mappings is selected, be sure to
specify the
color
(or opacity) map endpoints to include the range of values to be
mapped.&nbsp; Then use the color editor or the opacity editor to
specify the color or opacity at specific points along that range.<br>
  <br>
  </font>
  </font></font>
</ol>
</body>
</html>
